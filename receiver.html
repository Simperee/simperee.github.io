<!DOCTYPE html>
<!--
  Metrolist Cast Receiver
  Based on Google CastReceiver reference implementation
  https://github.com/googlecast/CastReceiver
-->
<html>
<head>
  <script src="//www.gstatic.com/cast/sdk/libs/caf_receiver/v3/cast_receiver_framework.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=DM+Sans:wght@300;400&display=swap');

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      background: #0a0a0a;
      font-family: 'DM Sans', sans-serif;

      /* Logo shown on loading screen */
      --playback-logo-image: none;
    }

    cast-media-player {
      /* ── Colour theme ── */
      --theme-hue: 0;           /* desaturated / neutral */
      --progress-color: rgba(255, 255, 255, 0.9);

      /* ── Splash / idle background ── */
      --splash-image: none;
      --splash-size: cover;

      /* ── Typography ── */
      --title-font-family: 'DM Sans', sans-serif;
      --title-font-weight: 300;
      --subtitle-font-family: 'DM Sans', sans-serif;
      --subtitle-font-weight: 300;

      /* ── Overlay background ── */
      --overlay-background-color: rgba(0, 0, 0, 0.75);

      /* ── No watermark ── */
      --watermark-image: none;
    }
  </style>
</head>
<body>
  <cast-media-player></cast-media-player>
  <script type="module">
    'use strict';

    const context       = cast.framework.CastReceiverContext.getInstance();
    const playerManager = context.getPlayerManager();

    /*
     * Basic LOAD interceptor — passes through direct URLs,
     * matches what Metrolist sends.
     */
    playerManager.setMessageInterceptor(
      cast.framework.messages.MessageType.LOAD, (loadRequestData) => {
        if (!loadRequestData || !loadRequestData.media) {
          const error = new cast.framework.messages.ErrorData(
            cast.framework.messages.ErrorType.LOAD_FAILED);
          error.reason = cast.framework.messages.ErrorReason.INVALID_REQUEST;
          return error;
        }
        return loadRequestData;
      }
    );

    /*
     * Supported commands.
     */
    const options = new cast.framework.CastReceiverOptions();
    options.supportedCommands =
      cast.framework.messages.Command.ALL_BASIC_MEDIA |
      cast.framework.messages.Command.QUEUE_PREV      |
      cast.framework.messages.Command.QUEUE_NEXT      |
      cast.framework.messages.Command.STREAM_TRANSFER;

    context.start(options);
  </script>
</body>
</html>
